@inject NavigationManager NavManager

<style>

.sb-comming-soon-root {      
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
} 

.sb-comming-soon-img {       
    width: 100%; 
    height: auto; 
    max-width: 35rem;
} 

.sb-comming-soon-title {  
    font-size: 2rem;
    font-weight: bold;
    text-align: center;
} 

.sb-comming-soon-details { 
    font-size: 0.75rem;
    font-weight: bold;
    text-align: center;
} 

</style>

<div class="sb-comming-soon-root">
   <img class="sb-comming-soon-img" src="_content/Infragistics.Samples.Core/images/comingSoon.svg" />

    <div class="sb-comming-soon-title">Coming Soon...
    </div>
    
    <div class="sb-comming-soon-details">
        This <a href="@SampleUrl" title="@NavPath" >example</a> is under developlment. We are almost done!
    </div>
</div>

@*<div class="sb-note">
       
   @*<div>
        <span class="oi oi-bell mr-2" aria-hidden="true"></span>
        <span>
            Sorry, there's no sample at this address. Please inform Infragistics support about this issue:
        </span>
    </div>
    <div>
        <span class="oi oi-warning mr-2" aria-hidden="true"></span>
        <span>
            Blazor samples browser is missing a sample with these page directives:
        </span>

        <div class="sb-code">
            <strong>@@page "@NavPath"</strong>
        </div>
        <div class="sb-code">
            <strong>@@page         "@DocPath"</strong>
        </div>
    </div>
    <div>
        <span class="oi oi-timer mr-2" aria-hidden="true"></span>
        <span>
            Meanwhile, you can explore all Blazor samples on this <a href="@BrowserPath" target="_blank">website</a>
        </span>
    </div>
</div>*@

@code {
    
    public string SampleUrl { get; set; }
    public string NavPath { get; set; }
    public string DocPath { get; set; }
    public string BrowserPath { get; set; }

    protected override void OnInitialized()
    {
        NavManager.LocationChanged += this.OnLocationChanged;
    }

    protected void UpdatePaths()
    {
        var baseUri = NavManager.BaseUri;
        var pathUri = NavManager.Uri;
        var route = "/" + pathUri.Replace(baseUri, "");
        route = route.Replace("/samples", "");
        this.DocPath = route;
        this.NavPath = "/samples" + this.DocPath;
        this.SampleUrl = pathUri.Replace("blazor-client", "blazor-client/samples");
        this.BrowserPath = baseUri + "samples";
        //Console.WriteLine("NotFound b=" + baseUri);
        //Console.WriteLine("NotFound p=" + pathUri);
        Console.WriteLine("SB missing " + pathUri);
        //Console.WriteLine("NotFound d=" + this.DocPath);
        StateHasChanged();
    }

    public void OnLocationChanged(object sender, Microsoft.AspNetCore.Components.Routing.LocationChangedEventArgs arg)
    {
        UpdatePaths();

        StateHasChanged();
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            UpdatePaths();
        }
    }
}
