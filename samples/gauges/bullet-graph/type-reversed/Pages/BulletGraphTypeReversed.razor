@page "/BulletGraphTypeReversed"

@using Infragistics.Blazor.Controls
@inject IInfragisticsBlazor InfragisticsBlazor;
@inject IJSRuntime JSRuntime;

<div class="igContainer">    
    <div class="igComponent">
        <BulletGraph Height="120px" Width="100%"
                     Orientation="LinearScaleOrientation.Horizontal"
                     BackingBrush="transparent"
                     BackingOutline="transparent"
                     TransitionDuration="500"
                     Value="70"
                     TargetValue="80"
                     MinimumValue="0"
                     MaximumValue="100"
                     Interval="10"
                     LabelInterval="10"
                     LabelExtent="0.0">
            @for (int i = 0; i < RangeInfo1.Count; i++)
            {
                GaugeRangeInfo info1 = RangeInfo1[i];
                <LinearGraphRange StartValue=info1.StartValue
                                  EndValue=info1.EndValue
                                  InnerStartExtent=info1.InnerStartExtent
                                  InnerEndExtent=info1.InnerEndExtent
                                  OuterStartExtent=info1.OuterStartExtent
                                  OuterEndExtent=info1.OuterEndExtent
                                  Brush="@info1.Brush"
                                  Outline="@info1.Outline">
                </LinearGraphRange>
            }
        </BulletGraph>
        <BulletGraph Height="120px" Width="100%"
                     Orientation="LinearScaleOrientation.Horizontal"
                     BackingBrush="transparent"
                     BackingOutline="transparent"
                     TransitionDuration="500"
                     Value="30"
                     TargetValue="20"
                     MinimumValue="0"
                     MaximumValue="100"
                     Interval="10"
                     LabelInterval="10"
                     LabelExtent="0.0">
            @for (int i = 0; i < RangeInfo2.Count; i++)
            {
                GaugeRangeInfo info2 = RangeInfo2[i];
                <LinearGraphRange StartValue=info2.StartValue
                                  EndValue=info2.EndValue
                                  InnerStartExtent=info2.InnerStartExtent
                                  InnerEndExtent=info2.InnerEndExtent
                                  OuterStartExtent=info2.OuterStartExtent
                                  OuterEndExtent=info2.OuterEndExtent
                                  Brush="@info2.Brush"
                                  Outline="@info2.Outline">
                </LinearGraphRange>
            }
        </BulletGraph>
    </div>
</div>

@code {

    private System.Collections.ObjectModel.ObservableCollection<GaugeRangeInfo> RangeInfo1;
    private System.Collections.ObjectModel.ObservableCollection<GaugeRangeInfo> RangeInfo2;    

    protected override void OnInitialized()
    {
        base.OnInitialized();        
        BulletGraphModule.Register(InfragisticsBlazor);

        RangeInfo1 = new System.Collections.ObjectModel.ObservableCollection<GaugeRangeInfo>();
        RangeInfo2 = new System.Collections.ObjectModel.ObservableCollection<GaugeRangeInfo>();       

        string[] colors1 = "#008000,#10B401,#45EC03,#2EFA2E".Split(',');
        string[] colors2 = "#CF0000,#FF0000,#FD3939,#FA6363".Split(',');        

        CreateGaugeRangeCollection(colors1, RangeInfo1);
        CreateGaugeRangeCollection(colors2, RangeInfo2);        
    }

    private void CreateGaugeRangeCollection(string[] colors, System.Collections.ObjectModel.ObservableCollection<GaugeRangeInfo> collection)
    {
        double rangeSpan = 100;
        double rangeValueInterval = rangeSpan / colors.Length;

        for (int i = 0; i < colors.Length; i++)
        {
            string color = colors[i];

            GaugeRangeInfo info = new GaugeRangeInfo()
            {
                StartValue = rangeValueInterval * i,
                EndValue = rangeValueInterval * (i + 1),
                Brush = color,
                Outline = color,
                InnerStartExtent = 0.25,
                InnerEndExtent = 0.25,
                OuterStartExtent = 0.8,
                OuterEndExtent = 0.8
            };

            collection.Add(info);
        }
    }
    
    protected override async Task OnInitializedAsync()
    {
        Console.WriteLine("Sample OnInitializedAsync...");
        await Task.Delay(10);
    }
}
