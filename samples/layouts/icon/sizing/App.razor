
@using IgniteUI.Blazor.Controls
@inject IIgniteUIBlazor IgniteUIBlazor

<div class="container vertical">
    <IgbIcon @ref="SmallIcon" Size="SizableComponentSize.Small" IconName="build" Collection="material"></IgbIcon>
    <IgbIcon @ref="MediumIcon" Size="SizableComponentSize.Medium" IconName="code" Collection="material"></IgbIcon>
    <IgbIcon @ref="LargeIcon" Size="SizableComponentSize.Large" IconName="search" Collection="material"></IgbIcon>
</div>

@code {

    public IgbIcon SmallIcon { get; set; }
    public IgbIcon MediumIcon { get; set; }
    public IgbIcon LargeIcon { get; set; }


    protected override void OnInitialized()
    {
        IgbIconModule.Register(IgniteUIBlazor);
    }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);

        if (this.SmallIcon != null && firstRender)
        {
            this.SmallIcon.EnsureReady().ContinueWith(new Action<Task>((e) =>
            {
                this.SmallIcon.RegisterIcon("build", "https://unpkg.com/material-design-icons@3.0.1/action/svg/production/ic_build_24px.svg", "material");
            }));
        }

        if (this.MediumIcon != null && firstRender)
        {
            this.MediumIcon.EnsureReady().ContinueWith(new Action<Task>((e) =>
            {
                this.MediumIcon.RegisterIcon("code", "https://unpkg.com/material-design-icons@3.0.1/action/svg/production/ic_code_24px.svg", "material");
            }));
        }

        if (this.LargeIcon != null && firstRender)
        {
            this.LargeIcon.EnsureReady().ContinueWith(new Action<Task>((e) =>
            {
                this.LargeIcon.RegisterIconFromText("search", "<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path d='M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z' /></svg>", "material");
            }));
        }
    }
}