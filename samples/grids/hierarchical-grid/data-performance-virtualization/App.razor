@using IgniteUI.Blazor.Controls

<div class="container vertical ig-typography">
    <div class="container vertical fill">
        @*
        <IgbColumn Field="Artist" Header="Artist" HasSummary="true"></IgbColumn>
        <IgbColumn Field="Photo" Header="Photo" DataType="GridColumnDataType.Image"></IgbColumn>
        <IgbColumn Field="Debut" Header="Debut" HasSummary="true"></IgbColumn>
        <IgbColumn Field="GrammyNominations" Header="Grammy Nominations" DataType="GridColumnDataType.Number" HasSummary="true"></IgbColumn>
        <IgbColumn Field="GrammyAwards" Header="Grammy Awards" DataType="GridColumnDataType.Number" HasSummary="true"></IgbColumn> *@


        <IgbButton Focus="OnButtonFocus" Blur="OnButtonBlur">
            Clear Sort
        </IgbButton>
        <IgbHierarchicalGrid
            Id="hGrid"
            Height="600px"
            Data="SingersData"
            @ref="hierarchicalGrid"
            AutoGenerate="true"
            PrimaryKey="ID"
            ColumnInit="OnColumnInit"
            ColumnsAutogenerated="OnColumnsAutogenerated">


            <IgbRowIsland ChildDataKey="Albums" AutoGenerate="false" GridCreated="OnGridCreated">
                <IgbColumn Field="Album" Header="Album" DataType="GridColumnDataType.String"></IgbColumn>
                <IgbColumn Field="LaunchDate" Header="Launch Date" DataType="GridColumnDataType.Date"></IgbColumn>
                <IgbColumn Field="BillboardReview" Header="Billboard Review" DataType="GridColumnDataType.Number" HasSummary="true"></IgbColumn>
                <IgbColumn Field="USBillboard200" Header="US Billboard 200" DataType="GridColumnDataType.Number" HasSummary="true"></IgbColumn>

                <IgbRowIsland ChildDataKey="Songs" AutoGenerate="false">
                    <IgbColumn Field="Number" Header="No." DataType="GridColumnDataType.String"></IgbColumn>
                    <IgbColumn Field="Title" Header="Title" DataType="GridColumnDataType.String" HasSummary="true"></IgbColumn>
                    <IgbColumn Field="Released" Header="Released" DataType="GridColumnDataType.Date"></IgbColumn>
                    <IgbColumn Field="Genre" Header="Genre" DataType="GridColumnDataType.String"></IgbColumn>
                </IgbRowIsland>
            </IgbRowIsland>

            <IgbActionStrip Name="actionStrip1" >
                <IgbGridPinningActions>
                </IgbGridPinningActions>
            </IgbActionStrip>
        </IgbHierarchicalGrid>

    </div>
</div>

@code {
    private IgbHierarchicalGrid hierarchicalGrid;

    private SingersData _singersData = null;
    public SingersData SingersData
    {
        get
        {
            if (_singersData == null)
            {
                _singersData = new SingersData();
            }
            return _singersData;
        }
    }

    public async void OnGridCreated(IgbGridCreatedEventArgs args) {
        Console.Write("created");
    }

    public void OnColumnsAutogenerated(IgbColumnsAutoGeneratedEventArgs args)
    {
        Console.Write("autogenerated");
    }

    public async void OnColumnInit(IgbColumnComponentEventArgs args)
    {
        Console.Write("init");
        if (args.Detail.Header == "Artist")
        {
            args.Detail.Hidden = true;
        }
    }

    public void OnRowPinning(IgbPinRowEventArgs args)
    {
        Console.Write("pinned");
        args.Detail.Row.Unpin();
    }

    void OnButtonClick()
    {
        Console.WriteLine("click");
    }

    void OnButtonFocus()
    {
        Console.WriteLine("focus");
    }

    void OnButtonBlur()
    {
        Console.WriteLine("blur");
    }
}