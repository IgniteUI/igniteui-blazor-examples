@using IgniteUI.Blazor.Controls


<div class="container vertical">
    <div class="container vertical">
        <IgbGeographicMap Height="100%" Width="100%" Zoomable="true">
            <IgbGeographicSymbolSeries DataSource="symbolData" MarkerType="MarkerType.Automatic" MarkerBrush="yellow" MarkerThickness=10
                                       LatitudeMemberPath="Lat" LongitudeMemberPath="Lon"
                                       TooltipTemplate="TooltipTemplate">
            </IgbGeographicSymbolSeries>
        </IgbGeographicMap>
    </div>
</div>

@code {
    public RenderFragment<IgbDataContext> TooltipTemplate = (context) =>
    {
        var dataContext = context as IgbDataContext;
        var dataItem = dataContext.Item as WorldCity;
        var svg = ((WorldCity)dataItem).Country.ToLower() + ".svg";
        var scr = "https://static.infragistics.com/xplatform/images/flags/" + svg.ToString();

        Console.WriteLine("https://static.infragistics.com/xplatform/images/flags/" + svg.ToString());

        return @<div>
            <div class='tooltipFlagBoarder'>
                <img class='tooltipFlagImage' src="@scr" />
            </div>

        </div>
    ;
    };

    private List<WorldCity> symbolData;

    protected override void OnInitialized()
    {
        symbolData = new List<WorldCity>
        {

            new WorldCity() { Lat = 32.763, Lon = -96.663, Country = "usa", Name = "Dallas" },
            new WorldCity() { Lat = -33.889, Lon = 151.028, Country = "aus", Name = "Sydney" },
            new WorldCity() { Lat = -36.848, Lon = 174.763, Country = "nzl", Name = "Auckland" },
            new WorldCity() { Lat = 25.285, Lon = 51.531, Country = "qat", Name = "Doha" },
            new WorldCity() { Lat = 8.949, Lon = -79.400, Country = "pan", Name = "Panama" },
            new WorldCity() { Lat = -33.475, Lon = -70.647, Country = "chl", Name = "Santiago" },
            new WorldCity() { Lat = 35.683, Lon = 139.809, Country = "jpn", Name = "Tokyo" },
            new WorldCity() { Lat = 33.795, Lon = -84.349, Country = "usa", Name = "Atlanta" },
            new WorldCity() { Lat = -26.178, Lon = 28.004, Country = "zaf", Name = "Johannesburg" },
            new WorldCity() { Lat = 40.750, Lon = -74.0999, Country = "usa", Name = "New York" },
            new WorldCity() { Lat = 1.229, Lon = 104.177, Country = "sgp", Name = "Singapore" },
            new WorldCity() { Lat = 55.750, Lon = 37.700, Country = "rus", Name = "Moscow" },
            new WorldCity() { Lat = 41.880, Lon = 12.520, Country = "ita", Name = "Roma" },
            new WorldCity() { Lat = 34.000, Lon = -118.25, Country = "usa", Name = "Los Angeles" }
        };        
    }
}