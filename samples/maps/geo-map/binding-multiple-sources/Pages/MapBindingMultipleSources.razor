@using Infragistics.Blazor.Controls
@inject IInfragisticsBlazor InfragisticsBlazor

<div class="igContainer">
    <div class="igComponent">
        <GeographicMap Height="100%" Width="100%" Zoomable="true">
            <GeographicPolylineSeries DataSource="@Coordinates" ShapeMemberPath="Points"
                                      ShapeStroke="Gray" ShapeStrokeThickness="1">
            </GeographicPolylineSeries>
            <GeographicPolylineSeries DataSource="@Flights" ShapeMemberPath="Points"
                                      ShapeStroke="Red" ShapeStrokeThickness="4" />
            <GeographicSymbolSeries DataSource="@Airports" LatitudeMemberPath="Lat"
                                    LongitudeMemberPath="Lon" MarkerType="MarkerType.Circle"
                                    MarkerBrush="#AAD3DF" MarkerOutline="Black" Thickness="1" />
        </GeographicMap>
    </div>
</div>

@code {

    private List<WorldCity> Airports;
    private List<FlightInfo> Flights;
    private List<CoordinateLine> Coordinates;

    //TODO - Data source seems incomplete...

    protected override void OnInitialized()
    {
        GeographicMapModule.Register(InfragisticsBlazor);

        Airports = WorldConnections.GetAirports();
        Flights = WorldConnections.GetFlights();
        Coordinates = WorldConnections.GetGridlines();

        Console.WriteLine(Airports.Count);
        Console.WriteLine(Flights.Count);
        Console.WriteLine(Coordinates.Count);

    }
}